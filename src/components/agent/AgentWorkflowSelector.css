/* Import czcionki */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

/* Definicje kolorów i zmiennych */
:root {
    --bg-dark: #0a0f1f;
    --primary-glow: #00d9ff;
    --secondary-glow: #a65ffc;
    --text-color-light: #c0c8e7;
    --border-color: rgba(0, 217, 255, 0.2);
    --line-color: rgba(0, 217, 255, 0.4);
    --node-bg: #1a2342;
}

.agent-container {
    position: relative; /* Potrzebne dla warstwy SVG */
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2rem;
    font-family: 'Poppins', sans-serif;
    width: 100%;
    background-color: var(--bg-dark);
    min-height: 100vh;
}

.layout-top-row {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    margin-bottom: 20px;
    position: relative;
}

.join-nodes-container {
    position: absolute;
    left: 50px;
    top: 50%;
    transform: translateY(-50%);
}

.brain-node {
    padding: 15px 30px;
    background: radial-gradient(circle, #5e35b1, #4527a0);
    border-radius: 10px;
    color: white;
    font-weight: 600;
    font-size: 1.3rem;
    position: relative;
    box-shadow: 0 0 25px var(--primary-glow), 0 0 50px var(--secondary-glow);
    z-index: 1; /* Musi być nad SVG */
}

/* --- Struktura Drzewa --- */

.tree-root-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    margin-top: 80px; /* Więcej miejsca na linie */
}

.tree-node-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    margin: 0 10px;
}

.tree-node {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    width: 140px;
    height: 120px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background-color: var(--node-bg);
    color: var(--text-color-light);
    padding: 15px 10px;
    text-align: center;
    transition: opacity 0.3s, transform 0.3s, border-color 0.3s, box-shadow 0.3s;
    position: relative;
    z-index: 1; /* Musi być nad SVG */
}

.tree-children-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    position: relative;
    margin-top: 80px; /* Więcej miejsca na linie */
}

/* --- Warstwa SVG do rysowania linii --- */

.connector-svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* Warstwa jest przezroczysta dla kliknięć */
    z-index: 0; /* Pod neuronami */
}

.connector-svg line {
    stroke: var(--line-color);
    stroke-width: 2px;
    transition: all 0.4s ease; /* Animacja dla pojawiania się linii */
}

.connector-svg line.join {
    stroke: var(--secondary-glow);
}

.connector-svg line.join-google {
    stroke: orange;
}

.connector-svg line.join,
.connector-svg line.join-google {
    stroke-dasharray: 8 8;
    animation: flow 1s linear infinite;
}

.connector-svg line.feedback {
    stroke: white;
    stroke-width: 2px;
    stroke-dasharray: 2 10;
    stroke-linecap: round;
    animation: flow 2s linear infinite;
}

@keyframes flow {
    from {
        stroke-dashoffset: 24;
    }
    to {
        stroke-dashoffset: 0;
    }
}


/* --- Style pomocnicze --- */

.node-icon {
    font-size: 1.8rem;
    margin-bottom: 8px;
    color: var(--primary-glow);
}
.node-label {
    font-size: 0.8rem;
    line-height: 1.3;
    font-weight: 400;
    flex-grow: 1;
}

.switch {
    position: relative;
    display: inline-block;
    width: 34px; height: 18px;
    margin-top: auto;
}
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
    position: absolute; cursor: pointer;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: #2c3e50;
    transition: .4s;
    border-radius: 18px;
}
.slider:before {
    position: absolute; content: "";
    height: 12px; width: 12px;
    left: 3px; bottom: 3px;
    background-color: var(--text-color-light);
    transition: .4s;
    border-radius: 50%;
}
input:checked + .slider { background-color: var(--primary-glow); }
input:checked + .slider:before { transform: translateX(16px); }

.tree-node[data-active="true"] {
    border-color: var(--primary-glow);
    box-shadow: 0 0 12px var(--primary-glow);
}

.join-node {
    border-color: var(--secondary-glow);
}
